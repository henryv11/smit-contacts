(function(t){function e(e){for(var a,r,i=e[0],c=e[1],u=e[2],l=0,m=[];l<i.length;l++)r=i[l],n[r]&&m.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],a=!0,r=1;r<o.length;r++){var c=o[r];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},n={app:0},s=[];function r(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"7ffe3a55"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(t){var e=[],o=n[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise(function(e,a){o=n[t]=[e,a]});e.push(o[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(t),s=function(e){c.onerror=c.onload=null,clearTimeout(u);var o=n[t];if(0!==o){if(o){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+s+")");r.type=a,r.request=s,o[1](r)}n[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},s=[],r={name:"App",created:function(){this.$http.interceptors.response.use(void 0,function(t){return new Promise(function(e,o){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch("logout"),t})})}},i=r,c=(o("7c55"),o("2877")),u=Object(c["a"])(i,n,s,!1,null,null,null),l=u.exports,d=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"d-flex justify-content-center",staticStyle:{height:"80vh"}},[o("div",{staticClass:"my-auto shadow border px-4 py-2"},[o("h1",{staticClass:"display-4"},[o("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"address-book"}}),t._v("Kontaktid\n      ")],1),o("hr",{staticClass:"my-2"}),"login"==t.formMode?o("div",[o("p",{staticClass:"small text-muted"},[t._v("Kasutamiseks peate olema sisse logitud")]),o("LoginForm"),o("p",{staticClass:"small mt-4 text-muted"},[t._v("\n          Puudub kasutaja?\n          "),o("b-link",{attrs:{href:"#"},on:{click:function(e){t.formMode="signup"}}},[t._v("Registreeri")])],1)],1):"signup"==t.formMode?o("div",[o("p",{staticClass:"small text-muted"},[t._v("Registreeri uus kasutaja")]),o("SignupForm",{on:{registrationSuccess:t.onRegistrationSuccess,registrationSuccessContinue:t.onRegistrationSuccessContinue}}),t.registrationSuccess?t._e():o("p",{staticClass:"small mt-4 p-0 text-muted"},[t._v("\n          Kasutaja olemas?\n          "),t.registrationSuccess?t._e():o("b-link",{attrs:{href:"#"},on:{click:function(e){t.formMode="login"}}},[t._v("Sisene")])],1)],1):t._e()])])])},f=[],p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[""!=t.errorMessage?o("p",{staticClass:"text-danger lead mb-2"},[t._v(t._s(t.errorMessage))]):t._e(),t.show?o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-username",label:"Kasutajanimi:","label-for":"input-username","label-size":"sm","label-align":"left","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-username",type:"text",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),o("b-form-group",{attrs:{id:"input-group-password",label:"Salasõna:","label-for":"input-password","label-size":"sm","label-align":"left","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-password",type:"password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),o("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},["loading"==t.authStatus?o("b-spinner",{attrs:{small:""}}):o("span",[t._v("Sisene")])],1)],1):t._e()],1)},h=[],b={name:"LoginForm",data:function(){return{form:{username:"",password:""},show:!0,errorMessage:""}},methods:{onSubmit:function(t){var e=this;this.loading=!0,t.preventDefault(),this.$store.dispatch("login",this.form).then(function(){e.errorMessage="",e.$router.push("contacts")}).catch(function(t){e.errorMessage="Vale kasutajanimi või parool!"})},onReset:function(t){var e=this;t.preventDefault(),this.form.username="",this.form.password="",this.show=!1,this.$nextTick(function(){e.show=!0})}},computed:{authStatus:function(){return this.$store.getters.authStatus}}},g=b,v=Object(c["a"])(g,p,h,!1,null,null,null),w=v.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.registrationSuccess?o("div",[o("p",{staticClass:"lead"},[t._v("Registreerimine õnnestus")]),o("p",{staticClass:"small mt-4 p-0 text-muted"},[t._v("\n      Võite nüüd\n      "),o("b-link",{attrs:{href:"#"},on:{click:t.registrationContinue}},[t._v("sisse logida")])],1)]):t.show?o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-username",label:"Kasutajanimi:","label-for":"input-username","label-size":"sm","label-align":"left","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-username",type:"text",state:t.validation.usernameOk,required:""},on:{change:t.formValidation},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),o("b-form-invalid-feedback",{attrs:{state:t.validation.usernameOk}},[t._v(t._s(t.validation.usernameError))]),o("b-form-valid-feedback",{attrs:{state:t.validation.usernameOk}},[t._v("Kasutajanimi sobib")])],1),o("b-form-group",{attrs:{id:"input-group-password",label:"Parool:","label-for":"input-password","label-size":"sm","label-align":"left","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-password",type:"password",state:t.validation.passwordOk,required:""},on:{change:t.formValidation},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),o("b-form-invalid-feedback",{attrs:{state:t.validation.passwordOk}},[t._v(t._s(t.validation.passwordError))]),o("b-form-valid-feedback",{attrs:{state:t.validation.passwordOk}},[t._v("Parool sobib")])],1),o("b-form-group",{attrs:{id:"input-group-password-confirm",label:"Kinnita parool:","label-for":"input-password-confirm","label-size":"sm","label-align":"left","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-password-confirm",type:"password",state:t.validation.passwordConfirmOk,required:""},on:{change:t.formValidation},model:{value:t.form.passwordConfirm,callback:function(e){t.$set(t.form,"passwordConfirm",e)},expression:"form.passwordConfirm"}}),o("b-form-invalid-feedback",{attrs:{state:t.validation.passwordConfirmOk}},[t._v(t._s(t.validation.passwordConfirmError))])],1),o("b-button",{attrs:{type:"submit",disabled:!t.formOk,size:"sm",variant:"primary"}},["loading"==t.authStatus?o("b-spinner",{attrs:{small:""}}):o("span",[t._v("Registreeri")])],1)],1):t._e()],1)},C=[],y={name:"LoginForm",data:function(){return{form:{username:"",password:"",passwordConfirm:""},validation:{usernameOk:null,usernameError:"",passwordOk:null,passwordError:"",passwordConfirmOk:null,passwordConfirmError:""},registrationSuccess:!1,show:!0}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.formValidation(),this.formOk&&this.$store.dispatch("register",this.form).then(function(){e.registrationSuccess=!0,e.$emit("registrationSuccess")}).catch(function(t){e.registrationSuccess=!1})},onReset:function(t){var e=this;t.preventDefault(),this.form.username="",this.form.password="",this.form.passwordConfirm="",this.show=!1,this.$nextTick(function(){e.show=!0})},formValidation:function(){var t=this;0==this.form.username.length?(this.validation.usernameError="",this.validation.usernameOk=null):this.form.username.length<3||this.form.username.length>15?(this.validation.usernameError="Kasutajanime pikkus peab olema 3-15 tähemärki",this.validation.usernameOk=!1):this.$http.get(this.$apiBaseUrl+"/api/user/checkUsernameAvailability/"+this.form.username).then(function(e){e.data.available?(t.validation.usernameError="",t.validation.usernameOk=!0):(t.validation.usernameError="Kasutajanimi on juba võetud",t.validation.usernameOk=!1)}),0==this.form.password.length?(this.validation.passwordError="",this.validation.passwordOk=null):this.form.password.length<6||this.form.password.length>20?(this.validation.passwordError="Parooli pikkus peab olema 6-20 tähemärki",this.validation.passwordOk=!1):(this.validation.passwordError="",this.validation.passwordOk=!0),0==this.form.passwordConfirm.length?(this.validation.passwordConfirmError="",this.validation.passwordConfirmOk=null):this.form.passwordConfirm!=this.form.password?(this.validation.passwordConfirmError="Parooli kinnitus ei ühti parooliga",this.validation.passwordConfirmOk=!1):this.form.passwordConfirm==this.form.password&&(this.validation.passwordConfirmError="",this.validation.passwordConfirmOk=!0)},registrationContinue:function(){this.$emit("registrationSuccessContinue"),this.registrationSuccess=!1}},computed:{authStatus:function(){return this.$store.getters.authStatus},formOk:function(){return this.validation.usernameOk&&this.validation.passwordOk&&this.validation.passwordConfirmOk}}},x=y,S=Object(c["a"])(x,k,C,!1,null,null,null),_=S.exports,$={name:"Home",components:{LoginForm:w,SignupForm:_},data:function(){return{formMode:"login",registrationSuccess:!1}},mounted:function(){this.$store.getters.isAuthenticated&&this.$router.push("contacts")},methods:{onRegistrationSuccess:function(){this.registrationSuccess=!0},onRegistrationSuccessContinue:function(){this.registrationSuccess=!1,this.formMode="login"}}},O=$,z=Object(c["a"])(O,m,f,!1,null,"5dfb10dd",null),E=z.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("Navbar",{on:{toggleNewUser:t.toggleNewUser}}),t.loading?o("div",{staticClass:"mt-4 pt-4"},[o("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):o("div",[o("b-collapse",{staticClass:"mt-2 shadow-sm",attrs:{id:"new-user-collapse"},model:{value:t.newUserMode,callback:function(e){t.newUserMode=e},expression:"newUserMode"}},[o("b-card",[o("NewContactForm",{on:{addContactSuccess:t.addContact}})],1)],1),o("b-list-group",{staticClass:"mt-2",attrs:{flush:""}},t._l(t.contacts,function(e){return o("b-list-group-item",{key:e.id,staticClass:"border-0 py-1"},[o("Contact",{attrs:{contact:e},on:{deleteSuccess:t.removeContact}})],1)}),1),t.totalElements>t.pageSize?o("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.totalElements,"per-page":t.pageSize,align:"center",size:"sm"},on:{input:t.fetchContacts},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)],1)},N=[],F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-navbar",{staticClass:"border rounded mt-2 px-2 py-1 bg-light",attrs:{variant:"faded",type:"light"}},[o("b-navbar-brand",{staticClass:"mb-0",attrs:{tag:"h1"}},[o("b-button",{staticClass:"p-0",staticStyle:{"text-decoration":"none"},attrs:{variant:"link text-dark",size:"lg"}},[o("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"address-book"}}),t._v("Kontaktid\n      ")],1)],1),o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-button",{attrs:{variant:"link text-dark",size:"sm"},on:{click:t.toggleNewUser}},[o("font-awesome-icon",{attrs:{icon:"user-plus"}})],1),o("b-nav-item-dropdown",{attrs:{right:"","toggle-class":"text-decoration-none","no-caret":""}},[o("template",{slot:"button-content"},[o("font-awesome-icon",{staticStyle:{color:"black"},attrs:{icon:"user-cog",size:"sm"}})],1),o("b-dropdown-text",{staticClass:"text-center"},[o("p",{staticClass:"small text-muted m-0"},[t._v(t._s(t.username))])]),o("b-dropdown-divider"),o("b-dropdown-text",[o("b-button",{staticClass:"p-1",attrs:{block:"",variant:"outline-primary",size:"sm"},on:{click:t.logout}},[o("font-awesome-icon",{attrs:{icon:"sign-out-alt",rotation:"180"}}),o("p",{staticClass:"d-inline-block mb-0 ml-2"},[t._v("Välju")])],1)],1)],2)],1)],1)],1)},M=[],U={name:"Navbar",data:function(){return{username:""}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){return t.$router.push("/")})},getUserName:function(){var t=this;this.username=this.$store.getters.username,void 0==this.username&&this.$store.dispatch("userInfo").then(function(){return t.username=t.$store.getters.username})},toggleNewUser:function(){this.$emit("toggleNewUser")}},mounted:function(){this.getUserName()}},P=U,R=Object(c["a"])(P,F,M,!1,null,null,null),T=R.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"rounded shadow-sm border"},[o("b-modal",{attrs:{size:"sm",centered:"",title:"Kindel, et soovid kontakti kustutada?","header-bg-variant":"danger","header-text-variant":"light","hide-footer":""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[o("div",{staticClass:"d-flex w-100 justify-content-between px-3"},[o("b-button",{attrs:{variant:"outline-dark",size:"sm"},on:{click:t.deleteContact}},[o("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),t._v("Kustuta\n      ")],1),o("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:t.hideDeleteConfirm}},[o("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"ban"}}),t._v("Tühista\n      ")],1)],1)]),t.editMode?t.editMode?o("div",{staticStyle:{"min-height":"5.5rem"}},[o("div",{staticClass:"d-flex w-100 justify-content-between bg-dark px-2 py-1 border-bottom"},[o("div",{staticClass:"text-white"},[o("b-form-input",{staticClass:"d-inline-block my-0 py-2 border-left-0 border-right-0 border-top-0 rounded-0 bg-dark text-white",staticStyle:{height:"1.5rem"},attrs:{size:"sm",placeholder:t.contact.name},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),o("div",[o("b-button",{staticClass:"p-0 mr-2",attrs:{variant:"link text-danger",size:"sm"},on:{click:t.showDeleteConfirm}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),o("b-button",{staticClass:"p-0 mr-2",attrs:{variant:"link text-white",size:"sm"},on:{click:t.resetEditForm}},[o("font-awesome-icon",{attrs:{icon:"undo"}})],1),o("b-button",{staticClass:"p-0 mr-2",attrs:{variant:"link text-white",size:"sm"},on:{click:t.editContact}},[o("font-awesome-icon",{attrs:{icon:"save"}})],1),o("b-button",{staticClass:"p-0 mr-1",attrs:{variant:"link text-white",size:"sm"},on:{click:function(e){t.editMode=!t.editMode}}},[o("font-awesome-icon",{attrs:{icon:"backspace"}})],1)],1)]),o("div",{staticClass:"text-left px-2 py-1"},[o("b-form-input",{staticClass:"my-1 py-2 w-50 border-left-0 border-right-0 border-top-0 rounded-0",staticStyle:{height:"1rem"},attrs:{size:"sm",placeholder:t.contact.codename},model:{value:t.editForm.codename,callback:function(e){t.$set(t.editForm,"codename",e)},expression:"editForm.codename"}}),o("b-form-input",{staticClass:"my-1 py-2 w-50 border-left-0 border-right-0 border-top-0 rounded-0",staticStyle:{height:"1rem"},attrs:{size:"sm",type:"tel",placeholder:t.contact.phoneNumber},model:{value:t.editForm.phoneNumber,callback:function(e){t.$set(t.editForm,"phoneNumber",e)},expression:"editForm.phoneNumber"}})],1)]):t._e():o("div",{staticStyle:{"min-height":"5.5rem"}},[o("div",{staticClass:"d-flex w-100 justify-content-between bg-light px-2 py-1 border-bottom"},[o("p",{staticClass:"h5 mb-0"},[o("font-awesome-icon",{staticClass:"mr-1 pb-1",attrs:{icon:"user",size:"xs"}}),t._v("\n        "+t._s(t.contact.name)+"\n      ")],1),o("div",[o("b-button",{staticClass:"p-0 mr-1",attrs:{variant:"link text-dark",size:"sm"},on:{click:function(e){t.editMode=!t.editMode}}},[o("font-awesome-icon",{attrs:{icon:"edit"}})],1)],1)]),o("div",{staticClass:"text-left px-2 py-1"},[o("p",{staticClass:"m-0 text-muted"},[t._v(t._s(t.contact.codename))]),o("p",{staticClass:"small m-0 text-muted"},[t._v(t._s(t.contact.phoneNumber))])])])],1)},q=[],B=(o("7f7f"),{name:"Contact",props:{contact:Object},data:function(){return{editForm:{name:this.contact.name,codename:this.contact.codename,phoneNumber:this.contact.phoneNumber},editMode:!1,modal:!1}},methods:{editContact:function(){var t=this;this.$http({method:"post",url:this.$apiBaseUrl+"/api/contacts/edit",headers:{Authorization:this.$store.getters.bearerToken},data:{id:this.contact.id,name:this.editForm.name,codename:this.editForm.codename,phoneNumber:this.editForm.phoneNumber}}).then(function(e){e.data.success&&(t.contact.name=e.data.contact.name,t.contact.codename=e.data.contact.codename,t.contact.phoneNumber=e.data.contact.phoneNumber,t.editMode=!1)}).catch(function(t){return console.log(t)})},deleteContact:function(){var t=this;this.$http({method:"post",url:this.$apiBaseUrl+"/api/contacts/delete/"+this.contact.id,headers:{Authorization:this.$store.getters.bearerToken}}).then(function(e){e.data.success&&(t.$emit("deleteSuccess",e.data.contact.id),t.hideDeleteConfirm())}).catch(function(t){return console.log(t)})},resetEditForm:function(){this.editForm.name=this.contact.name,this.editForm.codename=this.contact.codename,this.editForm.phoneNumber=this.contact.phoneNumber},showDeleteConfirm:function(){this.modal=!0},hideDeleteConfirm:function(){this.modal=!1}}}),K=B,D=Object(c["a"])(K,A,q,!1,null,"5541ce12",null),I=D.exports,V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{align:"left"}},[o("p",{staticClass:"h3 m-0"},[t._v("Lisa uus kontakt")]),o("hr",{staticClass:"my-2"}),t.show?o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-name",label:"Nimi:","label-for":"input-name","label-size":"sm","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-name",size:"sm",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("b-form-group",{attrs:{id:"input-group-codename",label:"Koodnimi:","label-for":"input-codename","label-size":"sm","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{id:"input-codename",size:"sm",required:""},model:{value:t.form.codename,callback:function(e){t.$set(t.form,"codename",e)},expression:"form.codename"}})],1),o("b-form-group",{attrs:{id:"input-group-phone",label:"Telefon:","label-for":"input-phone","label-size":"sm","label-class":"p-0 m-0"}},[o("b-form-input",{attrs:{type:"tel",id:"input-phone",size:"sm",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),o("b-button",{attrs:{type:"submit",variant:"link",size:"sm"}},[t.loading?o("b-spinner",{attrs:{small:""}}):o("div",[o("font-awesome-icon",{attrs:{icon:"user-plus",size:"lg"}}),o("p",{staticClass:"small d-inline-block mb-0 ml-2"},[t._v("Salvesta kontakt")])],1)],1)],1):t._e()],1)},L=[],J={name:"NewContactForm",data:function(){return{form:{name:"",codename:"",phone:""},show:!0,loading:!1}},methods:{onSubmit:function(t){t.preventDefault(),this.createContact()},onReset:function(t){t.preventDefault(),this.resetForm()},resetForm:function(){var t=this;this.form.name="",this.form.codename="",this.form.phone="",this.show=!1,this.$nextTick(function(){t.show=!0})},createContact:function(){var t=this;this.loading=!0,this.$http({method:"post",url:this.$apiBaseUrl+"/api/contacts/create",headers:{Authorization:this.$store.getters.bearerToken},data:{id:null,name:this.form.name,codename:this.form.codename,phoneNumber:this.form.phone}}).then(function(e){e.data.success&&(t.$emit("addContactSuccess",e.data.contact),t.resetForm()),t.loading=!1}).catch(function(e){t.loading=!1})}}},H=J,G=Object(c["a"])(H,V,L,!1,null,null,null),Q=G.exports,W={name:"Contacts",components:{Navbar:T,Contact:I,NewContactForm:Q},data:function(){return{newUserMode:!1,pageSize:10,currentPage:1,direction:"asc",orderBy:"createdAt",loading:!1,contacts:[],totalPages:0,totalElements:0}},methods:{openNewUser:function(){this.newUserMode=!0},closeNewUser:function(){this.newUserMode=!1},toggleNewUser:function(){this.newUserMode=!this.newUserMode},fetchContacts:function(){var t=this;this.loading=!0,this.$http({method:"get",url:this.$apiBaseUrl+"/api/contacts/"+(this.currentPage-1)+"/"+this.pageSize+"/"+this.direction+"/"+this.orderBy,headers:{Authorization:this.$store.getters.bearerToken}}).then(function(e){t.contacts=e.data.content,t.totalPages=e.data.totalPages,t.totalElements=e.data.totalElements,t.loading=!1}).catch(function(e){t.loading=!1})},addContact:function(t){this.contacts.length>=this.pageSize&&this.contacts.shift(),this.contacts.unshift(t)},removeContact:function(t){for(var e=0;e<this.contacts.length;e++)if(this.contacts[e].id==t){this.contacts.splice(e,1);break}}},mounted:function(){this.fetchContacts()}},X=W,Y=Object(c["a"])(X,j,N,!1,null,null,null),Z=Y.exports,tt=o("2f62");a["default"].use(tt["a"]);var et=new tt["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{authRequest:function(t){a["default"].set(t,"status","loading")},authSuccess:function(t,e){a["default"].set(t,"status","success"),t.token=e.token,t.user=e.user},authError:function(t){a["default"].set(t,"status","error")},logout:function(t){a["default"].set(t,"status",""),t.token="",t.user={}},setUser:function(t,e){t.user=e}},actions:{login:function(t,e){var o=t.commit;return new Promise(function(t,n){o("authRequest"),a["default"].prototype.axios({url:a["default"].prototype.$apiBaseUrl+"/api/auth/signin",data:e,method:"POST"}).then(function(e){var a=e.data.accessToken,n=e.data.userInfo;localStorage.setItem("token",a),o("authSuccess",{token:a,user:n}),t(e)}).catch(function(t){o("authError"),localStorage.removeItem("token"),n(t)})})},register:function(t,e){var o=t.commit;return new Promise(function(t,n){o("authRequest"),a["default"].prototype.axios({url:a["default"].prototype.$apiBaseUrl+"/api/auth/signup",data:e,method:"POST"}).then(function(e){o("authSuccess",{token:void 0,user:void 0}),t(e)}).catch(function(t){o("authError",t),localStorage.removeItem("token"),n(t)})})},logout:function(t){var e=t.commit;return new Promise(function(t,o){e("logout"),localStorage.removeItem("token"),t()})},userInfo:function(t){var e=t.getters,o=t.commit;if(e.isAuthenticated)return new Promise(function(t,n){a["default"].prototype.axios.get(a["default"].prototype.$apiBaseUrl+"/api/user/me",{headers:{Authorization:e.bearerToken}}).then(function(e){o("setUser",e.data),t(e)}).catch(function(t){n(t)})})}},getters:{bearerToken:function(t){return"Bearer ".concat(t.token)},isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status},userId:function(t){return t.user.id},username:function(t){return t.user.username}}});a["default"].use(d["a"]);var ot=new d["a"]({routes:[{path:"/",name:"home",component:E},{path:"/about",name:"about",component:function(){return o.e("about").then(o.bind(null,"f820"))}},{path:"/contacts",name:"contacts",component:Z,meta:{requiresAuth:!0}}]});ot.beforeEach(function(t,e,o){if(t.matched.some(function(t){return t.meta.requiresAuth})){if(et.getters.isAuthenticated)return void o();o("/")}else o()});var at=ot,nt=o("5f5b");o("f9e3"),o("2dd8");a["default"].use(nt["a"]);var st=o("9483");Object(st["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var rt=o("bc3a"),it=o.n(rt),ct=o("a7fe"),ut=o.n(ct);a["default"].prototype.$apiBaseUrl="http://springbootcontactservice-env.vhk784u9fe.us-east-2.elasticbeanstalk.com",a["default"].use(ut.a,it.a);var lt=o("ecee"),dt=o("c074"),mt=o("ad3d");lt["c"].add(dt["n"],dt["l"],dt["h"],dt["a"],dt["e"],dt["i"],dt["k"],dt["m"],dt["g"],dt["f"],dt["j"],dt["b"],dt["c"],dt["d"]),a["default"].component("font-awesome-icon",mt["a"]),a["default"].config.productionTip=!1,new a["default"]({router:at,store:et,render:function(t){return t(l)}}).$mount("#app")},"5c48":function(t,e,o){},"7c55":function(t,e,o){"use strict";var a=o("5c48"),n=o.n(a);n.a}});
//# sourceMappingURL=app.95c80fe5.js.map